"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[275],{5275:(q,p,i)=>{i.r(p),i.d(p,{DashboardUsersModule:()=>y});var c=i(1311),d=i(6814),u=i(95),h=i(6319),m=i(7021),_=i(3348),b=i(7490),e=i(9468),U=i(3934),C=i(1520),f=i(1272),Z=i(6084),T=i(2527);function v(s,l){if(1&s&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&s){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function x(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.changeUserRole(n,"Admin"==n.userRoles[0].roleName?"Receptionist":"Admin",o))}),e._uU(1),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ","Admin"==t.userRoles[0].roleName?"Receptionist":"Admin"," ")}}function A(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",21)(15,"button",22),e.NdJ("click",function(o){const a=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.toggleLockout(a.id,o))}),e._uU(16),e.qZA()(),e.TgZ(17,"td",21),e.YNc(18,x,2,1,"button",23),e.qZA()()}if(2&s){const t=l.$implicit;e.s9C("routerLink",t.id),e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(t.userRoles[0].roleName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.Oqu(t.age),e.xp6(2),e.Oqu(e.xi3(13,10,t.dateCreated,"short")),e.xp6(3),e.s9C("color",t.lockoutEnabled?"primary":"danger"),e.xp6(1),e.hij(" ",t.lockoutEnabled?"Enable":"Disable"," "),e.xp6(2),e.Q6J("ngIf","Admin"==t.userRoles[0].roleName||"Receptionist"==t.userRoles[0].roleName)}}const D=function(){return{cursor:"pointer"}};function M(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",16),e._uU(6,"Role"),e.qZA(),e.TgZ(7,"th",16),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th",16),e._uU(10,"Mobile"),e.qZA(),e.TgZ(11,"th",16),e._uU(12,"Age"),e.qZA(),e.TgZ(13,"th",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleOrder())}),e._uU(14," Date Created "),e.O4$(),e._UZ(15,"svg",18),e.qZA(),e.kcU(),e._UZ(16,"th",16),e.TgZ(17,"th",16),e._uU(18,"Change Role To"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,A,19,13,"tr",19),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(13),e.Q6J("ngStyle",e.DdM(3,D)),e.xp6(2),e.Q6J("name","desc"===t.userParams.order?"cil-arrow-bottom":"cil-arrow-top"),e.xp6(5),e.Q6J("ngForOf",t.users)}}function N(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",25)(1,"app-pagination",26),e.NdJ("ngModelChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.pagination.currentPage=o)})("pageChanged",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.pageChanged(o))}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("ngModel",t.pagination.currentPage)}}const J=[{path:"",component:(()=>{var s;class l{constructor(r,o){this.userService=r,this.adminService=o,this.users=[],this.userParams=new b.M({pageNumber:1,pageSize:15}),this.pagination=null,this.roles=_.T,this.modalVisibility=!1}ngOnInit(){this.getUsers()}getUsers(){this.userService.getUsers(this.userParams).subscribe(r=>{this.users=r.result,this.pagination=r.pagination})}pageChanged(r){this.userParams.pageNumber=r,this.getUsers()}resetFilters(){this.userParams=this.userService.resetUserParams(),this.getUsers()}toggleOrder(){this.userParams.order="asc"===this.userParams.order?"desc":"asc",this.getUsers()}openCreateUserModal(){this.modalVisibility=!this.modalVisibility}handleUserCreated(r){this.getUsers()}toggleLockout(r,o){return o.stopPropagation(),this.adminService.toggleLockout(r).subscribe(n=>{let a=this.users.findIndex(g=>g.id==r);this.users[a].lockoutEnabled=!this.users[a].lockoutEnabled})}changeUserRole(r,o,n){return n.stopPropagation(),this.adminService.changeRole(r.id,{currentRole:r.userRoles[0].roleName,newRole:o}).subscribe(g=>{let k=this.users.findIndex(R=>R.id==r.id);this.users[k].userRoles[0].roleName=o})}}return(s=l).\u0275fac=function(r){return new(r||s)(e.Y36(U.K),e.Y36(C.l))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-dashboard-users"]],decls:19,vars:6,consts:[["colorScheme","dark","expand","lg",1,"bg-dark"],["navbar","",1,"d-flex","flex-column","gap-2","flex-lg-row","justify-content-between","w-100","px-5"],["cButton","","color","light",3,"click"],[1,""],["cIcon","","name","cilPlus",1,"border","rounded","border-dark"],["name","roleName","aria-label","roleName","cSelect","",1,"w-25",3,"ngModel","ngModelChange","change"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["cForm","","role","search",1,"d-flex",3,"submit"],["cFormControl","","type","search","placeholder","Search","name","searchTerm","aria-label","Search",1,"me-2",3,"ngModel","ngModelChange"],["cButton","","color","light","variant","outline","type","submit"],["cTable","",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"visible","userCreated","visibleChange"],[3,"value"],["cTable",""],["scope","col"],["scope","col",1,"arrow-filter",3,"ngStyle","click"],["cIcon","",3,"name"],["class","user-table",3,"routerLink",4,"ngFor","ngForOf"],[1,"user-table",3,"routerLink"],[1,"pt-1"],["cButton","",1,"btn-m",3,"color","click"],["cButton","","color","primary","class"," btn-m",3,"click",4,"ngIf"],["cButton","","color","primary",1,"btn-m",3,"click"],[1,"d-flex","justify-content-center"],[3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(r,o){1&r&&(e.TgZ(0,"c-navbar",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.openCreateUserModal()}),e.TgZ(3,"span",3),e.O4$(),e._UZ(4,"svg",4),e._uU(5," Add new user"),e.qZA()(),e.kcU(),e.TgZ(6,"select",5),e.NdJ("ngModelChange",function(a){return o.userParams.roleName=a})("change",function(){return o.getUsers()}),e.TgZ(7,"option",6),e._uU(8,"Roles"),e.qZA(),e.YNc(9,v,2,2,"option",7),e.qZA(),e.TgZ(10,"form",8),e.NdJ("submit",function(){return o.getUsers()}),e.TgZ(11,"input",9),e.NdJ("ngModelChange",function(a){return o.userParams.searchTerm=a}),e.qZA(),e.TgZ(12,"button",10),e._uU(13,"Search"),e.qZA()(),e.TgZ(14,"button",2),e.NdJ("click",function(){return o.resetFilters()}),e._uU(15,"Reset Filters"),e.qZA()()(),e.YNc(16,M,21,4,"table",11),e.YNc(17,N,2,4,"div",12),e.TgZ(18,"app-add-user-modal",13),e.NdJ("userCreated",function(a){return o.handleUserCreated(a)})("visibleChange",function(a){return o.modalVisibility=a}),e.qZA()),2&r&&(e.xp6(6),e.Q6J("ngModel",o.userParams.roleName),e.xp6(3),e.Q6J("ngForOf",o.roles),e.xp6(2),e.Q6J("ngModel",o.userParams.searchTerm),e.xp6(5),e.Q6J("ngIf",o.users&&o.users.length>0),e.xp6(1),e.Q6J("ngIf",o.pagination),e.xp6(1),e.Q6J("visible",o.modalVisibility))},dependencies:[m.rH,c.auY,c.SB8,d.sg,d.O5,d.PC,u._Y,u.YN,u.Kr,u.Fj,u.EJ,u.JJ,u.JL,u.On,u.F,c.nqR,f.ar,c.Hq3,c.$_X,c.oHf,Z.Q,T.n,d.uU],styles:[".btn-m[_ngcontent-%COMP%]{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),l})(),data:{title:"Specialities"}}];let P=(()=>{var s;class l{}return(s=l).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m.Bz.forChild(J),m.Bz]}),l})(),y=(()=>{var s;class l{}return(s=l).\u0275fac=function(r){return new(r||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P,c.U$I,c.W4s,c.e$z,d.ez,c.u3b,u.u5,h.c,c.m81,c.zkK]}),l})()}}]);