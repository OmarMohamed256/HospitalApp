"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[547],{7547:(Se,v,p)=>{p.r(v),p.d(v,{DashboardDoctorModule:()=>ye});var l=p(1311),u=p(6814),s=p(95),D=p(6319),g=p(7021),_=p(3348),A=p(7490),e=p(9468),S=p(3934),h=p(5684),f=p(9229),Z=p(1272),b=p(6084),q=p(2527);function I(t,r){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.name," ")}}function J(t,r){if(1&t){const o=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"select",12),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.userParams.doctorSpecialityId=i)})("change",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.getDoctors())}),e.TgZ(1,"option",13),e._uU(2,"Speciality"),e.qZA(),e.YNc(3,I,2,2,"option",14),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("ngModel",o.userParams.doctorSpecialityId),e.xp6(1),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",o.specialityList)}}function N(t,r){if(1&t&&(e.TgZ(0,"tr",21)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",22)(15,"button",23),e._uU(16,"Edit"),e.qZA()()()),2&t){const o=r.$implicit,n=e.oxw(2);e.s9C("routerLink",o.id),e.xp6(2),e.Oqu(o.fullName),e.xp6(2),e.Oqu(n.getSpecialityNameById(o.doctorSpecialityId)),e.xp6(2),e.Oqu(o.email),e.xp6(2),e.Oqu(o.phoneNumber),e.xp6(2),e.Oqu(o.age),e.xp6(2),e.Oqu(e.xi3(13,7,o.dateCreated,"short"))}}const F=function(){return{cursor:"pointer"}};function P(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"table",16)(1,"thead")(2,"tr")(3,"th",17),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",17),e._uU(6,"Speciality"),e.qZA(),e.TgZ(7,"th",17),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th",17),e._uU(10,"Mobile"),e.qZA(),e.TgZ(11,"th",17),e._uU(12,"Age"),e.qZA(),e.TgZ(13,"th",18),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.toggleOrder())}),e._uU(14," Date Created "),e.O4$(),e._UZ(15,"svg",19),e.qZA(),e.kcU(),e._UZ(16,"th",17),e.qZA()(),e.TgZ(17,"tbody"),e.YNc(18,N,17,10,"tr",20),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(13),e.Q6J("ngStyle",e.DdM(3,F)),e.xp6(2),e.Q6J("name","desc"===o.userParams.order?"cil-arrow-bottom":"cil-arrow-top"),e.xp6(3),e.Q6J("ngForOf",o.doctors)}}function k(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",24)(1,"app-pagination",25),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.pagination.currentPage=i)})("pageChanged",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.pageChanged(i))}),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",o.pagination.totalItems)("itemsPerPage",o.pagination.itemsPerPage)("ngModel",o.pagination.currentPage)}}let Q=(()=>{var t;class r{constructor(n,i,a){this.userService=n,this.specialityService=i,this.toastr=a,this.doctors=[],this.roleName=_.K.DOCTOR,this.userParams=new A.M({pageNumber:1,pageSize:15,roleName:this.roleName}),this.pagination=null,this.specialityList=[],this.modalVisibility=!1}ngOnInit(){this.getDoctors(),this.getSpecialities()}getDoctors(){this.userService.getUsers(this.userParams).subscribe(n=>{this.doctors=n.result,this.pagination=n.pagination})}pageChanged(n){this.userParams.pageNumber=n,this.getDoctors()}toggleOrder(){this.userParams.order="asc"===this.userParams.order?"desc":"asc",this.getDoctors()}resetFilters(){this.userParams=this.userService.resetUserParams(),this.userParams.roleName=this.roleName,this.getDoctors()}getSpecialities(){this.specialityService.getSpecialities().subscribe(n=>{this.specialityList=n})}getSpecialityNameById(n){const i=this.specialityList.find(a=>a.id===n);return i?i.name:""}openCreateUserModal(){this.modalVisibility=!this.modalVisibility}handleUserCreated(n){this.getDoctors(),this.toastr.success("Doctor Created Successfully")}}return(t=r).\u0275fac=function(n){return new(n||t)(e.Y36(S.K),e.Y36(h.d),e.Y36(f._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard-doctors"]],decls:16,vars:7,consts:[["colorScheme","dark","expand","lg",1,"bg-dark"],["navbar","",1,"d-flex","flex-column","gap-2","flex-lg-row","justify-content-between","w-100","px-5"],["cButton","","color","light",3,"click"],[1,""],["cIcon","","name","cilPlus",1,"border","rounded","border-dark"],["name","speciality","class","w-25","aria-label","speciality","cSelect","",3,"ngModel","ngModelChange","change",4,"ngIf"],["cForm","","role","search",1,"d-flex",3,"submit"],["cFormControl","","type","search","placeholder","Search","name","searchTerm","aria-label","Search",1,"me-2",3,"ngModel","ngModelChange"],["cButton","","color","light","variant","outline","type","submit"],["cTable","",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[3,"selectedRole","specialityList","visible","userCreated","visibleChange"],["name","speciality","aria-label","speciality","cSelect","",1,"w-25",3,"ngModel","ngModelChange","change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["cTable",""],["scope","col"],["scope","col",1,"arrow-filter",3,"ngStyle","click"],["cIcon","",3,"name"],["class","user-table",3,"routerLink",4,"ngFor","ngForOf"],[1,"user-table",3,"routerLink"],[1,"pt-1"],["cButton","","color","primary",1,"btn-m"],[1,"d-flex","justify-content-center"],[3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(n,i){1&n&&(e.TgZ(0,"c-navbar",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.openCreateUserModal()}),e.TgZ(3,"span",3),e.O4$(),e._UZ(4,"svg",4),e._uU(5," Add new doctor"),e.qZA()(),e.YNc(6,J,4,3,"select",5),e.kcU(),e.TgZ(7,"form",6),e.NdJ("submit",function(){return i.getDoctors()}),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(c){return i.userParams.searchTerm=c}),e.qZA(),e.TgZ(9,"button",8),e._uU(10,"Search"),e.qZA()(),e.TgZ(11,"button",2),e.NdJ("click",function(){return i.resetFilters()}),e._uU(12,"Reset Filters"),e.qZA()()(),e.YNc(13,P,19,4,"table",9),e.YNc(14,k,2,4,"div",10),e.TgZ(15,"app-add-user-modal",11),e.NdJ("userCreated",function(c){return i.handleUserCreated(c)})("visibleChange",function(c){return i.modalVisibility=c}),e.qZA()),2&n&&(e.xp6(6),e.Q6J("ngIf",i.specialityList),e.xp6(2),e.Q6J("ngModel",i.userParams.searchTerm),e.xp6(5),e.Q6J("ngIf",i.doctors&&i.doctors.length>0),e.xp6(1),e.Q6J("ngIf",i.pagination),e.xp6(1),e.Q6J("selectedRole","Doctor")("specialityList",i.specialityList)("visible",i.modalVisibility))},dependencies:[g.rH,l.auY,l.SB8,u.sg,u.O5,u.PC,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.On,s.F,l.nqR,Z.ar,l.Hq3,l.$_X,l.oHf,b.Q,q.n,u.uU]}),r})();var T=p(2853),M=p(5719),C=p(1940),O=p(1520),U=p(923);function w(t,r){if(1&t&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.value),e.xp6(1),e.hij(" ",o.display," ")}}function H(t,r){if(1&t&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function Y(t,r){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const o=r.$implicit,n=e.oxw(2);e.Q6J("value",o.id)("selected",o.id==(null==n.user?null:n.user.doctorSpecialityId)),e.xp6(1),e.hij(" ",o.name," ")}}function L(t,r){if(1&t&&(e.TgZ(0,"div",20)(1,"label",4),e._uU(2,"Speciality"),e.qZA(),e.TgZ(3,"select",21)(4,"option",14),e._uU(5,"Speciality"),e.qZA(),e.YNc(6,Y,2,3,"option",22),e.qZA()()),2&t){const o=e.oxw();e.xp6(6),e.Q6J("ngForOf",o.specialityList)}}function V(t,r){1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label",4),e._uU(4,"Price Visit"),e.qZA(),e._UZ(5,"app-text-input",24),e.qZA()(),e.TgZ(6,"div",2)(7,"div",3)(8,"label",4),e._uU(9,"Price Revisit"),e.qZA(),e._UZ(10,"app-text-input",25),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("label","Price Visit"),e.xp6(5),e.Q6J("label","Price Visit"))}function W(t,r){if(1&t&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.timeSpanValue),e.xp6(1),e.Oqu(o.displayValue)}}function E(t,r){1&t&&(e.TgZ(0,"div",2)(1,"div",37),e._uU(2,"start time must be less than End time"),e.qZA()())}function B(t,r){if(1&t&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.timeSpanValue),e.xp6(1),e.Oqu(o.displayValue)}}function R(t,r){1&t&&(e.TgZ(0,"div",2)(1,"div",37),e._uU(2,"End time is required when start time is selected."),e.qZA()())}function $(t,r){1&t&&(e.TgZ(0,"div",2)(1,"div",37),e._uU(2,"End time must be greater than start time"),e.qZA()())}function G(t,r){if(1&t&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"select",32)(7,"option",33),e._uU(8,"Select a start time"),e.qZA(),e.YNc(9,W,2,2,"option",34),e.qZA(),e.YNc(10,E,3,0,"div",35),e.qZA(),e.TgZ(11,"div",2)(12,"select",36)(13,"option",33),e._uU(14,"Select an end time"),e.qZA(),e.YNc(15,B,2,2,"option",34),e.qZA(),e.YNc(16,R,3,0,"div",35),e.YNc(17,$,3,0,"div",35),e.qZA()()()),2&t){const o=r.$implicit,n=r.index,i=e.oxw(2);e.Q6J("formGroupName",n),e.xp6(4),e.Oqu(i.getDayOfWeekLabel(o.get("dayOfWeek").value)),e.xp6(5),e.Q6J("ngForOf",i.getHalfHourIntervals())("ngForTrackBy",i.trackByFn),e.xp6(1),e.Q6J("ngIf",o.get("startTime").hasError("startTimeInvalid")),e.xp6(5),e.Q6J("ngForOf",i.getHalfHourIntervals())("ngForTrackBy",i.trackByFn),e.xp6(1),e.Q6J("ngIf",o.get("endTime").hasError("endTimeRequired")),e.xp6(1),e.Q6J("ngIf",o.get("endTime").hasError("endTimeInvalid"))}}function K(t,r){if(1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",26),e.YNc(4,G,18,9,"div",27),e.qZA()()()()),2&t){const o=e.oxw();e.xp6(4),e.Q6J("ngForOf",o.updateUserForm.controls.doctorWorkingHours.controls)}}function j(t,r){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o," ")}}function z(t,r){if(1&t&&(e.TgZ(0,"div",1)(1,"ul",37),e.YNc(2,j,2,1,"li",38),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.validationErrors)}}let X=(()=>{var t;class r{constructor(n,i,a,c){this.fb=n,this.adminService=i,this.toastr=a,this.specialityService=c,this.userRole=_.K.PATIENT,this.validationErrors=[],this.specialityList=[],this.genderList=T.y,this.roles=_.T,this.doctorWorkingHours=[]}ngOnInit(){this.intializeForm(),this.getSpecialities(),console.log(this.doctorWorkingHours)}intializeForm(){this.updateUserForm=this.fb.group({id:[this.user?.id,s.kI.required],username:[this.user?.username,s.kI.required],email:[this.user?.email,s.kI.required],age:[this.user?.age,s.kI.required],fullName:[this.user?.fullName,s.kI.required],phoneNumber:[this.user?.phoneNumber,s.kI.required],gender:[this.user?.gender,s.kI.required],doctorSpecialityId:[this.user?.doctorSpecialityId],role:[this.userRole,s.kI.required],priceVisit:[this.user?.priceVisit],priceRevisit:[this.user?.priceRevisit],doctorWorkingHours:this.fb.array([])});for(let n=0;n<7;n++){const i=this.fb.group({doctorId:[this.user?.id],dayOfWeek:[n],startTime:[""],endTime:[""]}),a=i.get("startTime"),c=i.get("endTime");a?.valueChanges.subscribe(d=>{const m=c?.value;d&&!m?c?.setErrors({endTimeRequired:!0}):d&&m&&d>=m?a?.setErrors({startTimeInvalid:!0}):c?.setErrors(null)}),c?.valueChanges.subscribe(d=>{const m=a?.value;c?.setErrors(m&&d&&m>=d?{endTimeInvalid:!0}:null)}),this.updateUserForm.controls.doctorWorkingHours.push(i)}this.intializeDoctorWorkingHours()}getSpecialities(){this.specialityService.getSpecialities().subscribe(n=>{this.specialityList=n})}getHalfHourIntervals(){const n=[];for(let i=0;i<24;i++)for(let a=0;a<60;a+=30){const c=i>=12?"PM":"AM",y=`${(i%12==0?12:i%12).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")} ${c}`,Ae=new C.i(60*i*60*1e3+60*a*1e3).toString();n.push({displayValue:y,timeSpanValue:Ae})}return n}getDayOfWeekLabel(n){switch(n){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return""}}trackByFn(n,i){return i.timeSpanValue}intializeDoctorWorkingHours(){const n=this.updateUserForm.controls.doctorWorkingHours;for(const i of this.doctorWorkingHours){const a=i.dayOfWeek,c=n.controls.find(d=>d.get("dayOfWeek")?.value===a);c&&(c.get("startTime")?.setValue(this.formatDoctorWorkingHours(i.startTime.toString())),c.get("endTime")?.setValue(this.formatDoctorWorkingHours(i.endTime.toString())))}}formatDoctorWorkingHours(n){const[i,a,c]=n.split(":"),d=1e3*(60*parseInt(i)*60+60*parseInt(a)+parseInt(c));return new C.i(d).toString()}submitUpdateUserForm(){const n=this.mapFormToUpdateUser();this.adminService.updateUser(n).subscribe({next:i=>{this.toastr.success("User Updated Successfully")},error:i=>{this.validationErrors=i}})}mapFormToUpdateUser(){let n=this.updateUserForm.get("doctorWorkingHours")?.value;n=n.filter(c=>""!==c.startTime&&""!==c.endTime);const i={id:this.updateUserForm.get("id")?.value,username:this.updateUserForm.get("username")?.value,email:this.updateUserForm.get("email")?.value,gender:this.updateUserForm.get("gender")?.value,age:+this.updateUserForm.get("age")?.value,fullName:this.updateUserForm.get("fullName")?.value,phoneNumber:this.updateUserForm.get("phoneNumber")?.value,role:this.updateUserForm.get("role")?.value};if(n.length>0&&(i.doctorWorkingHours=n,console.log(i.doctorWorkingHours)),"Doctor"===this.updateUserForm.get("role")?.value){const c=+this.updateUserForm.get("doctorSpecialityId")?.value,d=+this.updateUserForm.get("priceVisit")?.value,m=+this.updateUserForm.get("priceRevisit")?.value;c&&d&&m&&(i.doctorSpecialityId=c,i.priceVisit=d,i.priceRevisit=m)}return i}}return(t=r).\u0275fac=function(n){return new(n||t)(e.Y36(s.qu),e.Y36(O.l),e.Y36(f._W),e.Y36(h.d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-user-view"]],inputs:{user:"user",userRole:"userRole",specialityList:"specialityList",doctorWorkingHours:"doctorWorkingHours"},decls:52,vars:13,consts:[["cForm","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"mb-3"],["cLabel",""],["icon","","formControlName","username",3,"label"],["icon","","formControlName","email",3,"label"],["icon","","formControlName","age",3,"label"],["icon","","formControlName","fullName",3,"label"],["icon","","formControlName","phoneNumber",3,"label"],["name","gender","aria-label","gender","formControlName","gender","cSelect",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["name","role","aria-label","role","cSelect","","formControlName","role"],["disabled","","value","","selected",""],["class","col mb-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"w-100","text-center","mt-2"],["cButton","","color","primary","type","submit",3,"disabled"],[3,"value"],[1,"col","mb-3"],["name","doctorSpecialityId","cSelect","","formControlName","doctorSpecialityId"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"],["type","number","icon","","formControlName","priceVisit",3,"label"],["type","number","icon","","formControlName","priceRevisit",3,"label"],["formArrayName","doctorWorkingHours"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"row","mb-2"],[1,"col-2"],[1,"text-dark","fw-bold"],["formControlName","startTime",1,"form-select"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","col",4,"ngIf"],["formControlName","endTime",1,"form-select"],[1,"text-danger"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.updateUserForm.valid&&i.submitUpdateUserForm()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"User Name"),e.qZA(),e._UZ(6,"app-text-input",5),e.qZA()(),e.TgZ(7,"div",2)(8,"div",3)(9,"label",4),e._uU(10,"Email"),e.qZA(),e._UZ(11,"app-text-input",6),e.qZA()()(),e.TgZ(12,"div",1)(13,"div",2)(14,"div",3)(15,"label",4),e._uU(16,"Age"),e.qZA(),e._UZ(17,"app-text-input",7),e.qZA()(),e.TgZ(18,"div",2)(19,"div",3)(20,"label",4),e._uU(21,"Full Name"),e.qZA(),e._UZ(22,"app-text-input",8),e.qZA()()(),e.TgZ(23,"div",1)(24,"div",2)(25,"div",3)(26,"label",4),e._uU(27,"Phone Number"),e.qZA(),e._UZ(28,"app-text-input",9),e.qZA()(),e.TgZ(29,"div",2)(30,"div",3)(31,"label",4),e._uU(32,"Gender"),e.qZA(),e.TgZ(33,"select",10)(34,"option",11),e._uU(35,"Gender"),e.qZA(),e.YNc(36,w,2,2,"option",12),e.qZA()()()(),e.TgZ(37,"div",1)(38,"div",2)(39,"label",4),e._uU(40,"Role"),e.qZA(),e.TgZ(41,"select",13)(42,"option",14),e._uU(43,"Role"),e.qZA(),e.YNc(44,H,2,2,"option",12),e.qZA()(),e.YNc(45,L,7,1,"div",15),e.qZA(),e.YNc(46,V,11,2,"div",16),e.YNc(47,K,5,1,"div",16),e.YNc(48,z,3,1,"div",16),e.TgZ(49,"div",17)(50,"button",18),e._uU(51,"Update User"),e.qZA()()()),2&n&&(e.Q6J("formGroup",i.updateUserForm),e.xp6(6),e.Q6J("label","User Name"),e.xp6(5),e.Q6J("label","Email"),e.xp6(6),e.Q6J("label","Age"),e.xp6(5),e.Q6J("label","Full Name"),e.xp6(6),e.Q6J("label","Phone Number"),e.xp6(8),e.Q6J("ngForOf",i.genderList),e.xp6(8),e.Q6J("ngForOf",i.roles),e.xp6(1),e.Q6J("ngIf","Doctor"==i.updateUserForm.value.role),e.xp6(1),e.Q6J("ngIf","Doctor"==i.updateUserForm.value.role),e.xp6(1),e.Q6J("ngIf","Doctor"==i.updateUserForm.value.role),e.xp6(1),e.Q6J("ngIf",i.validationErrors.length>0),e.xp6(2),e.Q6J("disabled",!i.updateUserForm.valid))},dependencies:[l.Hq3,l.$_X,l.eFW,l.nqR,s._Y,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,s.x0,s.CE,u.sg,u.O5,U.t]}),r})();var ee=p(4007);function te(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"tr",17),e.NdJ("click",function(){const a=e.CHM(o).$implicit,c=e.oxw(2);return e.KtG(c.openModal(a))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",18)(8,"button",19),e._uU(9,"Edit"),e.qZA()()()}if(2&t){const o=r.$implicit;e.xp6(2),e.Oqu(o.service.name),e.xp6(2),e.hij("",o.doctorPercentage,"%"),e.xp6(2),e.hij("",o.hospitalPercentage,"%")}}function oe(t,r){if(1&t&&(e.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th",15),e._uU(4,"Service Name"),e.qZA(),e.TgZ(5,"th",15),e._uU(6,"Doctor Percentage"),e.qZA(),e.TgZ(7,"th",15),e._uU(8,"Hospital Percentage"),e.qZA(),e._UZ(9,"th",15),e.qZA()(),e.TgZ(10,"tbody"),e.YNc(11,te,10,3,"tr",16),e.qZA()()),2&t){const o=e.oxw();e.xp6(11),e.Q6J("ngForOf",o.doctor_services)}}function ie(t,r){if(1&t&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.xp6(1),e.hij(" ",o," ")}}function ne(t,r){if(1&t&&(e.TgZ(0,"div",5)(1,"ul",20),e.YNc(2,ie,2,1,"li",21),e.qZA()()),2&t){const o=e.oxw();e.xp6(2),e.Q6J("ngForOf",o.validationErrors)}}let re=(()=>{var t;class r{constructor(n,i){this.doctorServiceService=n,this.fb=i,this.doctor_services=[],this.doctorId="",this.visible=!1,this.validationErrors=[]}ngOnInit(){this.getDoctorServicesById(),this.initializeForm()}getDoctorServicesById(){this.doctorServiceService.getDoctorServiceByDocorId(this.doctorId).subscribe(n=>{this.doctor_services=n})}toggleLiveDemo(){this.visible=!this.visible}openModal(n){this.visible=!0,this.mapFormToDoctorService(n)}mapFormToDoctorService(n){this.updateDoctorServiceForm.setValue({doctorPercentage:n.doctorPercentage,hospitalPercentage:n.hospitalPercentage,serviceName:n.service?.name,id:n.id})}initializeForm(){this.updateDoctorServiceForm=this.fb.group({serviceName:[{value:"",disabled:!0},s.kI.required],id:["",s.kI.required],doctorPercentage:[0,[s.kI.required,s.kI.max(100)]],hospitalPercentage:[0,[s.kI.required,s.kI.max(100)]]}),this.updateDoctorServiceForm.valueChanges.subscribe(n=>{this.doctorServiceToUpdate={...this.doctorServiceToUpdate,...n}})}updateDoctorServiceById(){this.doctorServiceService.updateDoctorServiceById(this.doctorServiceToUpdate).subscribe({next:n=>{const i=this.doctor_services.findIndex(a=>a.id===this.doctorServiceToUpdate.id);-1!==i&&(this.doctor_services[i]={...this.doctor_services[i],doctorPercentage:this.doctorServiceToUpdate.doctorPercentage,hospitalPercentage:this.doctorServiceToUpdate.hospitalPercentage}),this.toggleLiveDemo()},error:n=>{this.validationErrors=n}})}handleLiveDemoChange(n){this.visible=n}}return(t=r).\u0275fac=function(n){return new(n||t)(e.Y36(ee.M),e.Y36(s.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-doctor-services"]],inputs:{doctorId:"doctorId"},decls:30,vars:10,consts:[["cTable","",4,"ngIf"],["id","liveDemoModal","size","lg",3,"visible","visibleChange"],["cModalTitle",""],["cButtonClose","",3,"click"],["cForm","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"mb-3"],["cLabel",""],["icon","cilUser",3,"formControl","label"],["icon","cilEnvelopeClosed",3,"formControl","label"],["class","row",4,"ngIf"],["cButton","","color","secondary",3,"click"],["cButton","","color","primary",3,"click"],["cTable",""],["scope","col"],["class","user-table",3,"click",4,"ngFor","ngForOf"],[1,"user-table",3,"click"],[1,"pt-1"],["cButton","","color","primary",1,"btn-m"],[1,"text-danger"],[4,"ngFor","ngForOf"]],template:function(n,i){1&n&&(e.YNc(0,oe,12,1,"table",0),e.TgZ(1,"c-modal",1),e.NdJ("visibleChange",function(c){return i.handleLiveDemoChange(c)}),e.TgZ(2,"c-modal-header")(3,"h5",2),e._uU(4,"Modal title"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return i.toggleLiveDemo()}),e.qZA()(),e.TgZ(6,"c-modal-body")(7,"form",4),e.NdJ("ngSubmit",function(){return i.updateDoctorServiceForm.valid}),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Service Name"),e.qZA(),e._UZ(13,"app-text-input",9),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label",8),e._uU(17,"Doctor Percentage"),e.qZA(),e._UZ(18,"app-text-input",10),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",7)(21,"label",8),e._uU(22,"Hospital Percentage"),e.qZA(),e._UZ(23,"app-text-input",9),e.qZA()()()(),e.TgZ(24,"c-modal-footer"),e.YNc(25,ne,3,1,"div",11),e.TgZ(26,"button",12),e.NdJ("click",function(){return i.toggleLiveDemo()}),e._uU(27," Close "),e.qZA(),e.TgZ(28,"button",13),e.NdJ("click",function(){return i.updateDoctorServiceById()}),e._uU(29,"Update"),e.qZA()()()),2&n&&(e.Q6J("ngIf",i.doctor_services&&i.doctor_services.length>0),e.xp6(1),e.Q6J("visible",i.visible),e.xp6(6),e.Q6J("formGroup",i.updateDoctorServiceForm),e.xp6(6),e.Q6J("formControl",i.updateDoctorServiceForm.controls.serviceName)("label","Service Name"),e.xp6(5),e.Q6J("formControl",i.updateDoctorServiceForm.controls.doctorPercentage)("label","Doctor Percentage"),e.xp6(5),e.Q6J("formControl",i.updateDoctorServiceForm.controls.hospitalPercentage)("label","Hospital Percentage"),e.xp6(2),e.Q6J("ngIf",i.validationErrors.length>0))},dependencies:[l.auY,u.sg,u.O5,s._Y,s.JJ,s.JL,U.t,l.Hq3,l.PFQ,l.$_X,l.eFW,s.oH,s.sg,l.KF4,l.zS7,l.YI7,l.Rbl,l.vPP]}),r})();var ae=p(5273),se=p(4541);function ce(t,r){if(1&t&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.name," ")}}function le(t,r){if(1&t){const o=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"select",11),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.appointmentParams.specialityId=i)})("change",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.getAppointments())}),e.TgZ(1,"option",12),e._uU(2,"Speciality"),e.qZA(),e.YNc(3,ce,2,2,"option",13),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("ngModel",o.appointmentParams.specialityId),e.xp6(1),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",o.specialityList)}}function pe(t,r){if(1&t&&(e.TgZ(0,"option",14),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o.value),e.xp6(1),e.hij(" ",o.display," ")}}function de(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"select",15),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.appointmentParams.type=i)})("change",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.getAppointments())}),e.TgZ(1,"option",12),e._uU(2,"Type"),e.qZA(),e.YNc(3,pe,2,2,"option",13),e.qZA()}if(2&t){const o=e.oxw();e.Q6J("ngModel",o.appointmentParams.type),e.xp6(1),e.Q6J("value",""),e.xp6(2),e.Q6J("ngForOf",o.typeList)}}const ue=function(t){return["/appointments/update",t]};function me(t,r){if(1&t&&(e.TgZ(0,"tr",21)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA()()),2&t){const o=r.$implicit,n=e.oxw(2);e.Q6J("routerLink",e.VKq(14,ue,null==o?null:o.id)),e.xp6(2),e.Oqu(null==n.user?null:n.user.fullName),e.xp6(2),e.Oqu(null==o.patient?null:o.patient.fullName),e.xp6(2),e.Oqu(n.getSpecialityNameById(o.appointmentSpecialityId)),e.xp6(2),e.Oqu(o.status),e.xp6(2),e.Oqu(o.type),e.xp6(2),e.Oqu(e.xi3(13,8,o.dateCreated,"short")),e.xp6(3),e.Oqu(e.xi3(16,11,o.dateOfVisit,"short"))}}const x=function(){return{cursor:"pointer"}};function ge(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"table",16)(1,"thead")(2,"tr")(3,"th",17),e._uU(4,"Doctor Name"),e.qZA(),e.TgZ(5,"th",17),e._uU(6,"Patient Name"),e.qZA(),e.TgZ(7,"th",17),e._uU(8,"Speciality"),e.qZA(),e.TgZ(9,"th",17),e._uU(10,"Status"),e.qZA(),e.TgZ(11,"th",17),e._uU(12,"Type"),e.qZA(),e.TgZ(13,"th",18),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.toggleOrder("dateCreated"))}),e._uU(14," Date Created "),e.O4$(),e._UZ(15,"svg",19),e.qZA(),e.kcU(),e.TgZ(16,"th",18),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.toggleOrder("dateOfVisit"))}),e._uU(17," Date Of Visit "),e.O4$(),e._UZ(18,"svg",19),e.qZA()()(),e.kcU(),e.TgZ(19,"tbody"),e.YNc(20,me,17,16,"tr",20),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(13),e.Q6J("ngStyle",e.DdM(5,x)),e.xp6(2),e.Q6J("name","dateCreated"===o.appointmentParams.orderBy&&"desc"===o.appointmentParams.order?"cil-arrow-bottom":"cil-arrow-top"),e.xp6(1),e.Q6J("ngStyle",e.DdM(6,x)),e.xp6(2),e.Q6J("name","dateOfVisit"===o.appointmentParams.orderBy&&"desc"===o.appointmentParams.order?"cil-arrow-bottom":"cil-arrow-top"),e.xp6(2),e.Q6J("ngForOf",o.appointments)}}function _e(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",22)(1,"app-pagination",23),e.NdJ("ngModelChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.pagination.currentPage=i)})("pageChanged",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a.pageChanged(i))}),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",o.pagination.totalItems)("itemsPerPage",o.pagination.itemsPerPage)("ngModel",o.pagination.currentPage)}}let he=(()=>{var t;class r{constructor(n,i){this.appointmentService=n,this.specialityService=i,this.appointments=[],this.specialityList=[],this.appointmentParams={pageNumber:1,pageSize:15,orderBy:"dateCreated",order:"desc",type:"",specialityId:null},this.pagination=null,this.typeList=ae.f}ngOnInit(){this.getAppointments(),this.getSpecialities()}toggleOrder(n){this.appointmentParams.orderBy===n?this.appointmentParams.order="asc"===this.appointmentParams.order?"desc":"asc":(this.appointmentParams.orderBy=n,this.appointmentParams.order="desc"),this.getAppointments()}getAppointments(){this.appointmentService.getAppointmentsByDoctorId(this.appointmentParams,this.user?.id).subscribe(n=>{this.appointments=n.result,this.pagination=n.pagination,this.appointments?.forEach(i=>{i.doctor=this.user})})}pageChanged(n){this.appointmentParams.pageNumber=n,this.getAppointments()}getSpecialities(){this.specialityService.getSpecialities().subscribe(n=>{this.specialityList=n})}getSpecialityNameById(n){const i=this.specialityList.find(a=>a.id===n);return i?i.name:""}resetFilters(){this.appointmentParams=this.appointmentService.resetParams(),this.getAppointments()}}return(t=r).\u0275fac=function(n){return new(n||t)(e.Y36(se.H),e.Y36(h.d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-doctor-appointments"]],inputs:{user:"user"},decls:13,vars:5,consts:[["colorScheme","dark","expand","lg",1,"bg-dark"],["navbar","",1,"d-flex","flex-column","gap-2","flex-lg-row","justify-content-between","w-100","px-5"],["cButton","","color","light","routerLink","/appointments/add"],[1,""],["cIcon","","name","cilPlus",1,"border","rounded","border-dark"],["name","speciality","class","w-25","aria-label","speciality","cSelect","",3,"ngModel","ngModelChange","change",4,"ngIf"],["type","date",1,"form-control",3,"ngModel","change","ngModelChange"],["name","type","class","w-25","aria-label","type","cSelect","",3,"ngModel","ngModelChange","change",4,"ngIf"],["cButton","","color","light",3,"click"],["cTable","",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],["name","speciality","aria-label","speciality","cSelect","",1,"w-25",3,"ngModel","ngModelChange","change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","type","aria-label","type","cSelect","",1,"w-25",3,"ngModel","ngModelChange","change"],["cTable",""],["scope","col"],["scope","col",1,"arrow-filter",3,"ngStyle","click"],["cIcon","",3,"name"],["class","user-table",3,"routerLink",4,"ngFor","ngForOf"],[1,"user-table",3,"routerLink"],[1,"d-flex","justify-content-center"],[3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(n,i){1&n&&(e.TgZ(0,"c-navbar",0)(1,"div",1)(2,"button",2)(3,"span",3),e.O4$(),e._UZ(4,"svg",4),e._uU(5," Add new appointment"),e.qZA()(),e.YNc(6,le,4,3,"select",5),e.kcU(),e.TgZ(7,"input",6),e.NdJ("change",function(){return i.getAppointments()})("ngModelChange",function(c){return i.appointmentParams.appointmentDateOfVisit=c}),e.qZA(),e.YNc(8,de,4,3,"select",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return i.resetFilters()}),e._uU(10,"Reset Filters"),e.qZA()()(),e.YNc(11,ge,21,7,"table",9),e.YNc(12,_e,2,4,"div",10)),2&n&&(e.xp6(6),e.Q6J("ngIf",i.specialityList),e.xp6(1),e.Q6J("ngModel",i.appointmentParams.appointmentDateOfVisit),e.xp6(1),e.Q6J("ngIf",i.typeList),e.xp6(3),e.Q6J("ngIf",i.appointments),e.xp6(1),e.Q6J("ngIf",i.pagination))},dependencies:[g.rH,l.auY,l.SB8,u.sg,u.O5,u.PC,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.On,l.nqR,Z.ar,l.Hq3,b.Q,u.uU]}),r})();function ve(t,r){if(1&t&&e._UZ(0,"app-update-user-view",9),2&t){const o=e.oxw();e.Q6J("userRole","Doctor")("user",o.user)("doctorWorkingHours",o.doctorWorkingHours)}}function fe(t,r){if(1&t&&e._UZ(0,"app-doctor-services",11),2&t){const o=e.oxw(2);e.Q6J("doctorId",o.user.id)}}function Ze(t,r){if(1&t&&(e.TgZ(0,"c-tab-pane",5),e.YNc(1,fe,1,1,"app-doctor-services",10),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",1===o.activePane)}}function be(t,r){if(1&t&&e._UZ(0,"app-doctor-appointments",12),2&t){const o=e.oxw();e.Q6J("user",o.user)}}const Ue=[{path:"",component:Q,data:{title:"Doctor"}},{path:":id",component:(()=>{var t;class r{constructor(n,i){this.route=n,this.doctorWorkingHoursService=i,this.activePane=0,this.genderList=T.y,this.validationErrors=[],this.doctorWorkingHours=null}ngOnInit(){this.route.data.subscribe(n=>{this.user=n.user,this.getDoctorWorkingHours(this.user.id)})}onTabChange(n){this.activePane=n}getDoctorWorkingHours(n){this.doctorWorkingHoursService.getDoctorWorkingHoursByDoctorId(n).subscribe(i=>{this.doctorWorkingHours=i})}}return(t=r).\u0275fac=function(n){return new(n||t)(e.Y36(g.gz),e.Y36(M.i))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-doctor-info"]],decls:17,vars:11,consts:[["variant","tabs"],["cNavLink","",3,"active","cTabContent","tabPaneIdx"],["cNavLink","",3,"cTabContent","tabPaneIdx"],[3,"activeTabPaneIdx","activeTabPaneIdxChange"],["tabContent","cTabContent"],[1,"p-3"],[3,"userRole","user","doctorWorkingHours",4,"ngIf"],["class","p-3",4,"ngIf"],[3,"user",4,"ngIf"],[3,"userRole","user","doctorWorkingHours"],[3,"doctorId",4,"ngIf"],[3,"doctorId"],[3,"user"]],template:function(n,i){if(1&n&&(e.TgZ(0,"c-nav",0)(1,"c-nav-item")(2,"a",1),e._uU(3," Doctor Information "),e.qZA()(),e.TgZ(4,"c-nav-item")(5,"a",2),e._uU(6," Services "),e.qZA()(),e.TgZ(7,"c-nav-item")(8,"a",2),e._uU(9," Appointments "),e.qZA()()(),e.TgZ(10,"c-tab-content",3,4),e.NdJ("activeTabPaneIdxChange",function(c){return i.onTabChange(c)}),e.TgZ(12,"c-tab-pane",5),e.YNc(13,ve,1,3,"app-update-user-view",6),e.qZA(),e.YNc(14,Ze,2,1,"c-tab-pane",7),e.TgZ(15,"c-tab-pane",5),e.YNc(16,be,1,1,"app-doctor-appointments",8),e.qZA()()),2&n){const a=e.MAs(11);e.xp6(2),e.Q6J("active",!0)("cTabContent",a)("tabPaneIdx",0),e.xp6(3),e.Q6J("cTabContent",a)("tabPaneIdx",1),e.xp6(3),e.Q6J("cTabContent",a)("tabPaneIdx",2),e.xp6(2),e.Q6J("activeTabPaneIdx",i.activePane),e.xp6(3),e.Q6J("ngIf",0===i.activePane&&null!=i.doctorWorkingHours),e.xp6(1),e.Q6J("ngIf",i.user),e.xp6(2),e.Q6J("ngIf",2===i.activePane)}},dependencies:[u.O5,l.rZi,l.HOP,l.Vh3,l.C$2,l.Eug,l.hL0,X,re,he]}),r})(),resolve:{user:p(8597).n},data:{title:"Doctor Info"}}];let xe=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ue),g.Bz]}),r})(),ye=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[xe,l.U$I,l.W4s,l.e$z,u.ez,s.u5,D.c,l.m81,l.zkK,s.UX]}),r})()}}]);